<!DOCTYPE html><html lang="cs"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta name="viewport" content="width=980" id="viewport">
	<link rel="shortcut icon" href="index_files/favicon.ico" type="image/x-icon">
	<link rel="alternate" type="application/rss+xml" title="RSS kanál fóra" href="http://forum.nette.org/cs/feed.php">
	<link rel="alternate" type="application/rss+xml" title="RSS kanál fóra, jen jeden příspěvek z vlákna" href="http://forum.nette.org/cs/feed.php?group">
	<link rel="search" type="application/opensearchdescription+xml" href="http://forum.nette.org/opensearch.xml" title="Nette Framework forum">
	<link rel="image_src" href="http://files.nette.org/images/fb-preview.png">
	<script src="index_files/ga.js" async="" type="text/javascript"></script><script><!--
/* Script removed by snapshot save */
--></script>
	<script src="index_files/analytics.js"></script><script><!--
/* Script removed by snapshot save */
--></script>
	<title>Odecita se polozka v databazi — Nette Framework forum</title>
<link rel="stylesheet" type="text/css" href="index_files/phpbb_blue_n.css">
<script src="index_files/jsapi.js" type="text/javascript"></script>
<script type="text/javascript" src="index_files/jquery.min.js"></script>
<script src="index_files/jquery.placeholders.js" type="text/javascript"></script>
<script src="index_files/timeago.js" type="text/javascript"></script>
<script src="index_files/main.js" type="text/javascript"></script><script src="index_files/uds.js" type="text/javascript"></script><link href="index_files/default+en.css" type="text/css" rel="stylesheet"><script src="index_files/default+en.I.js" type="text/javascript"></script>
<link rel="alternate" type="application/rss+xml" title="RSS tématu" href="http://forum.nette.org/cs/feed.php?tid=14879">
<script><!--
/* Script removed by snapshot save */
--></script></head>

<body id="forum-nette-org">

<div id="punwrap">
<div id="punviewtopic" class="pun">

	<div id="brdheader">
		<a href="http://forum.nette.org/cs/" title="Úvodní stránka fóra" id="logo"><span>Úvodní stránka</span></a>

		<div id="brdmenu" class="inbox">
			<ul>
				<li id="navindex"><a href="http://forum.nette.org/cs/"><span>Úvodní stránka</span></a></li>
				<li id="navsearch"><a href="http://forum.nette.org/cs/search.php"><span>Rozšířené hledání</span></a></li>
				<li id="navuserlist"><a href="http://forum.nette.org/cs/userlist.php"><span>Uživatelé</span></a></li>
				<li id="navrules"><a href="http://forum.nette.org/cs/misc.php?action=rules"><span>Pravidla</span></a></li>
				<li id="navextra1"><a href="http://forum.nette.org/cs/feed.php" class="rss"><span><img src="index_files/feed-icon.gif" alt="RSS"> RSS</span></a></li>
			</ul>
		</div>

		<div id="tools">
			<a href="http://forum.nette.org/cs/login.php" title="Nejste přihlášen(a)">Přihlásit</a> | <a href="http://forum.nette.org/cs/register.php">Registrovat</a> | <a href="http://forum.nette.org/en/">English version</a>
			<form action="http://www.google.com/cse" id="search">
			<input name="cx" value="011549293477758430224:vxofa9ufnhc" type="hidden"><input name="q" class="text" size="20" id="search-text" type="search"><input name="sa" src="index_files/search.png" alt="Hledej" type="image"></form>
		</div>

		<div id="menu">
		<ul>
			<li><a href="http://nette.org/cs/download"><span>Download</span></a></li>
			<li><a href="http://doc.nette.org/cs/"><span>Dokumentace</span></a></li>
			<li><a href="http://addons.nette.org/cs/"><span>Doplňky</span></a></li>
			<li><a href="http://pla.nette.org/cs/"><span>Planette</span></a></li>
			<li><a href="http://forum.nette.org/cs/" class="active"><span>Fórum</span></a></li>
			<li><a href="http://dev.nette.org/cs/"><span>Vývoj</span></a></li>
			<li><a href="http://nette.org/cs/o-frameworku"><span>O frameworku</span></a></li>
		</ul>
		</div>
	</div>

	
	
	<div id="content">
		<div class="inner">
			<div id="brdwelcome" class="inbox"></div>

			

			<div class="linkst">
	<div class="inbox">
		<div class="breadcrumbs"><a href="http://forum.nette.org/cs/">Úvodní stránka</a> » <a href="http://forum.nette.org/cs/f39-databaze-orm">Databáze &amp; ORM</a> » Odecita se polozka v databazi</div>
				<h1>Odecita se polozka v databazi</h1>

			</div>
</div>

<div id="p106854" class="blockpost rowodd firstpost">
	<h2><span><span class="conr">1. </span><a href="#p106854" title="12. 7. 17:59" data-time="2013-07-12T17:59:54+0200">před 4 měsíci</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="http://forum.nette.org/cs/profile.php?id=4449">Tom_as</a></strong></dt>
					<dd class="usertitle"><strong>Člen</strong></dd>
					<dd class="postavatar"><img src="index_files/714c3d905574284e270be365b8a52fe3.gif" alt="" height="60" width="60"></dd>
					<dd>Registrovaný: 28. 10. 2011</dd>
					<dd>Příspěvky: 27</dd>
				</dl>
			</div>
			<div class="postright">
				<h3>Odecita se polozka v databazi</h3>
				<div class="postmsg">
					
<p>Zdravim,</p>

<p>psal jsem jeden projekt kde se maji odecitat penize z uctu pri zakoupeni
zbozi. Vse fungovalo pri testovani skvele ale najednou dnes se prestali odecitat
penize.</p>

<p>Nechapu to a uz dneska to odnesla jedna klavesnice.</p>

<pre class="src-php"><code><span class="php-var">$this</span>-&gt;database-&gt;<span class="php-keyword2">exec</span>(<span class="php-quote">"UPDATE `"</span>.DB_PREFIX.<span class="php-quote">"__users_account` SET `balance`= balance - ? WHERE (`id`= ?)"</span>, <span class="php-var">$valOrder</span>-&gt;price_post + <span class="php-var">$valOrder</span>-&gt;price, <span class="php-var">$user</span>-&gt;identity-&gt;id)</code></pre>

<p>Chtel bych timto poprosit o radu. Hlavne jak je mozne ze to fungovalo a ted
se to uz prestava semnou bavit :)</p>

<!-- by Texy2! -->
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p></p></div>
			<div class="postfootright"><div> </div></div>
		</div>
	</div>
</div>

<div id="p106866" class="blockpost roweven">
	<h2><span><span class="conr">2. </span><a href="#p106866" title="13. 7. 0:59" data-time="2013-07-13T00:59:44+0200">před 4 měsíci</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="http://forum.nette.org/cs/profile.php?id=1999">frosty22</a></strong></dt>
					<dd class="usertitle"><strong>Nette guru</strong></dd>
					<dd class="postavatar"><img src="index_files/63e092090ba96939b6dd21f9a896f485.jpg" alt="" height="60" width="60"></dd>
					<dd>Registrovaný: 2. 4. 2009</dd>
					<dd>Příspěvky: 343</dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Odecita se polozka v databazi</h3>
				<div class="postmsg">
					
<p>Čauky,<br>
obávám se, že tohle nikomu nic neřekne, určitě to chce trošku více
rozepsat – minimálně, co to znamená, že se přestali odečítat
peníze – posílá to tento dotaz do databáze? (tj. je vidět v baru či
nikoliv, pokud ho máš tedy zapnutý pro SQL query). Pokud ano, zkopíruj sem
i ten konečný dotaz, resp. asi bych ho nejdříve zkusil přímo provést,
zda-li ovlivní to co má, leč tedy to bude asi zřetelné i z dotazu jako
samotného.</p>

<ul>
	<li>Odečítání vypadá v pořádku, možná může být problém v ID –
	existuje řádek users_account pro přihlášeného uživatele?</li>

	<li>resp. jeho ID?</li>

	<li>Je správně uložené ID v $user-&gt;identity-&gt;id?</li>

	<li>Když si hodíš dump na: $valOrder-&gt;price_post + $valOrder-&gt;price,
	vrátí to správné číslo, větší než-li 0?</li>
</ul>

					<p class="postedit"><em>Editoval frosty22 (13. 7. 0:59)</em></p>
				</div>
				<div class="postsignature"><hr>
<p>„Where's the ‚Any‘ key?“<br>
WebCreating.cz | frosty22.cz</p>
</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p></p></div>
			<div class="postfootright"><div> </div></div>
		</div>
	</div>
</div>

<div class="linksb">
	<div class="inbox">
				<p><a href="http://forum.nette.org/cs/feed.php?tid=14879" class="rss"><img src="index_files/feed-icon.gif" alt="RSS feed"> RSS tématu</a></p>
	</div>
</div>


</div>
		</div>
	</div>

	<div id="brdfooter" class="block">
	<h2><span>Zápatí</span></h2>
	<div class="box">
		<div class="inbox">

			<div class="conl">
				<form id="qjump" method="get" action="http://forum.nette.org/cs/viewforum.php">
					<div><label>Přejít na
					<br><select name="id" onchange="">
						<optgroup label="Uživatelé Nette Framework">
							<option value="40">Začátečníci</option>
							<option value="22">Obecná diskuse</option>
							<option value="28">Nette\Application</option>
							<option value="37">Nette\Application - routování</option>
							<option value="29">Formuláře</option>
							<option value="39" selected="selected">Databáze &amp; ORM</option>
							<option value="41">AJAX</option>
							<option value="20">Autentizace a autorizace</option>
							<option value="43">Konfigurace a Dependency Injection</option>
							<option value="44">Testování</option>
							<option value="27">Doplňky, pluginy a komponenty</option>
							<option value="23">Tipy, triky, návody</option>
						</optgroup>
						<optgroup label="Různé">
							<option value="33">Poslední sobota</option>
							<option value="30">Práce a zakázky</option>
							<option value="21">Různé</option>
							<option value="36">Koš</option>
						</optgroup>
						<optgroup label="Vývoj Nette Framework (uzavřeno)">
							<option value="31">Changelog</option>
							<option value="24">Hlášení chyb</option>
							<option value="26">Feature Requests</option>
							<option value="35">Diskuse o vývoji frameworku</option>
							<option value="32">Dokumentace</option>
							<option value="42">RFC</option>
					</optgroup>
					</select>
					<input value="Přejít" accesskey="g" type="submit">
					</label></div>
				</form>
			</div>
			<div class="clearer"></div>
		</div>
	</div>
</div>
</div>
	


</body></html>